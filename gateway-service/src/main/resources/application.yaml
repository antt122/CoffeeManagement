server:
  port: 8000

spring:
  application:
    name: gateway-service
  profiles:
    active: local

  cloud:
    gateway:
      server:
        webflux:
          discovery:
            locator:
              lower-case-service-id: true
              enabled: true
          routes:
            # 1. Luáº­t cho Auth Service
                    - id: auth-service-route
                      uri: lb://auth-service
                      predicates:
                        - Path=/api/auth/**
                      filters:
                        # ðŸ‘‡ Sá»¬A á»ž ÄÃ‚Y: Thay Ä‘á»•i Ä‘Ã­ch Ä‘áº¿n thÃ nh /auth/... (bá» /api)
                        # Input: /api/auth/login -> Segment: "login" -> Output: /auth/login
                        - RewritePath=/api/auth/(?<segment>.*), /auth/$\{segment}

                    # 2. Luáº­t cho HR Service
                    - id: hr-service-route
                      uri: lb://hr-service
                      predicates:
                        - Path=/api/hr/**
                      filters:
                        # HR Service cá»§a báº¡n hÃ¬nh nhÆ° Ä‘Ã£ dÃ¹ng @RequestMapping("/api/hr/...")
                        # NÃªn chÃºng ta giá»¯ nguyÃªn Ä‘Æ°á»ng dáº«n, khÃ´ng cáº§n cáº¯t /api
                        # Input: /api/hr/staff -> Segment: "staff" -> Output: /api/hr/staff
                        - RewritePath=/api/hr/(?<segment>.*), /api/hr/$\{segment}

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: always